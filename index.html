<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Bee by bluesoft</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Bee</h1>
        <h2>database changes manager</h2>
        <a href="https://github.com/bluesoft/bee" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="bee" class="anchor" href="#bee"><span class="octicon octicon-link"></span></a>Bee</h1>

<p>A tool for managing database changes. Works with Oracle and MySQL.</p>

<p>Note: the use with ANT is deprecated, the most recent version uses MAVEN.</p>

<h2>
<a name="modules" class="anchor" href="#modules"><span class="octicon octicon-link"></span></a>Modules</h2>

<ul>
<li>Schema - Validation of the structures of the tables, indexes, packages, etc.</li>
<li>Data - Validation of core data tables.</li>
<li>Dbchange - Execute some change on tables, like "ruby migrations".</li>
</ul><h2>
<a name="how-to-install" class="anchor" href="#how-to-install"><span class="octicon octicon-link"></span></a>How to Install</h2>

<p>Download the binary distribution and unzip it. There are 2 folders: <code>bin</code> and <code>lib</code>.</p>

<p>Put your jdbc jar into the <code>lib</code> folder.</p>

<h2>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>All modules use by the file "bee.properties" by default. This file contains the database connection settings. There may be several database configurations inside this file.</p>

<p>You can also specify an alternate configuration file using the -DdatabaseConfig = <code>&lt;file&gt;</code>.</p>

<pre><code> The file structure is as follows: 

      &lt;conf&gt;.driver=&lt;driver&gt;

      &lt;conf&gt;.url=&lt;url&gt;

      &lt;conf&gt;.user=&lt;user&gt;

      &lt;conf&gt;.password=&lt;password&gt;

      &lt;conf&gt; - configuration name to be used.
      &lt;driver&gt; - jdbc driver class.
      &lt;url&gt; - url of the database connection.
      &lt;user&gt; - user connection.
      &lt;password&gt; - connection password.

  Example:
        Configuring a database called 'delta'.
              delta.driver=oracle.jdbc.OracleDriver
              delta.url=jdbc:oracle:thin:@server:1111:delta
              delta.user=delta123
              delta.password=delta123
</code></pre>

<h2>
<a name="schema" class="anchor" href="#schema"><span class="octicon octicon-link"></span></a>Schema</h2>

<p>The module checks the schema structure of the database, comparing with existing files in the project. These files are in the bee project, inside specific subdirectories for each type of structure.</p>

<ul>
<li>tables - structure of tables, indexes and constraints.</li>
<li>triggers</li>
<li>packages</li>
<li>procedures - procedures and functions.</li>
<li>views</li>
<li>sequences.bee - file containing all sequences</li>
</ul><h3>
<a name="commands" class="anchor" href="#commands"><span class="octicon octicon-link"></span></a>Commands</h3>

<pre><code>  To create a file
     bee schema:generate &lt;database&gt; &lt;object&gt;

  To create all files from a specific schema
     bee schema:generate &lt;database&gt;

  To validate one file
     bee schema:validate &lt;database&gt; &lt;object&gt;

  To validate all files
     bee schema:validate &lt;database&gt;

  To create a MySql DDL script from local structure files. Will create a file named `bee.sql`
     bee schema:recreate_mysql &lt;object&gt;

  To create a Oracle DDL script from local structure files. Will create a file named `bee.sql`
     bee schema:recreate_oracle &lt;object&gt;
</code></pre>

<h2>
<a name="data" class="anchor" href="#data"><span class="octicon octicon-link"></span></a>Data</h2>

<p>This module checks the 'core' data from the database.</p>

<p>Core data files are in the directory bee/data, and use a CSV format.</p>

<h3>
<a name="commands-1" class="anchor" href="#commands-1"><span class="octicon octicon-link"></span></a>Commands</h3>

<pre><code>    To create a data file
        bee data:generate &lt;database&gt; &lt;object&gt;

    To validate all core tables
        bee data:validate &lt;database&gt;

    To validate one core table
        bee data:validate &lt;database&gt; &lt;object&gt;
</code></pre>

<h2>
<a name="dbchange" class="anchor" href="#dbchange"><span class="octicon octicon-link"></span></a>Dbchange</h2>

<p>The Dbchange module performs the task of changing the database, following the concepts of ruby migrations. The update module will check which scripts to be executed and then execute them in chronological order.</p>

<p>Each file represents one or more changes in the database and the file name follows the format:</p>

<pre><code>  code timestamp + description + .dbchange
</code></pre>

<p>The contents of the file consists of comments, update scripts and rollback scripts. Example:</p>

<pre><code>-- comment script

::up

    command to update the database;
    command to update the database;
    command to update the database;


::down

    command to reverse the database;
    command to reverse the database;
    command to reverse the database;
</code></pre>

<p>Note:  when there is no rollback commands section: down should be removed, including its header. This will indicate there is no way to reverse the script.</p>

<h3>
<a name="commands-2" class="anchor" href="#commands-2"><span class="octicon octicon-link"></span></a>Commands</h3>

<pre><code>    To create a dbchange
        bee dbchange:create &lt;description of file&gt;

    To verify the status of dbchanges in database (dbchanges implemented and not implemented).
        bee dbchange:status &lt;database&gt;

    To apply all dbchanges
        bee dbchange:up &lt;database&gt;

    To apply one dbchange (up)
        bee dbchange:up &lt;database&gt; &lt;name of file&gt; Example: 1311201110120100-easter_egg.dbchange

    To apply one dbchange (down)
        bee dbchange:down &lt;database&gt; &lt;name of file&gt;

    To mark a dbchange as implemented
        bee dbchange:mark &lt;database&gt; &lt;name of file&gt;

    To mark all dbchanges as implemented
        bee dbchange:markall &lt;database&gt;

    To unmark a dbchange as implemented (or mark as not implemented)
        bee dbchange:unmark &lt;database&gt; &lt;name of file&gt;
</code></pre>

<h2>
<a name="known-issues" class="anchor" href="#known-issues"><span class="octicon octicon-link"></span></a>Known Issues</h2>

<ul>
<li>The <code>dbschema:generate</code> and <code>dbchema:validate</code> only works on Oracle and MySql databases</li>
<li>Windows .bat script doesn't scan for lib jars, so you need to set the CLASSPATH variable manually.</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/bluesoft/bee/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/bluesoft/bee/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/bluesoft/bee"></a> is maintained by <a href="https://github.com/bluesoft">bluesoft</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>